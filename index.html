<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Performance Per TCO Calculator</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <nav>
      <a href="index.html">Home</a>
      <a href="faq.html">FAQ</a>
      <a href="doc.html">Documentation</a>
      <a href="features.html">On the Horizon</a>
      <a href="feedback.html">Give Feedback</a>
    </nav>
  </header>
  
  <h1>Performance Per TCO Calculator</h1>

  <div id="themeToggleContainer">
    <label class="theme-switch">
      <input type="checkbox" id="themeToggle" onchange="updateAITip()">
      <span class="slider"></span>
      <span class="emoji" id="themeIcon">ðŸŒž</span>
    </label>
  </div>

  <section id="about">
    <p>
      This calculator estimates the performance per Total Cost of Ownership (TCO) for GPU-based compute systems.
      It allows you to configure capital and operational cost parameters, choose benchmarks (GROMACS/AMBER),
      and compare GPUs based on their performance per TCO.
    </p>
  </section>

<form id="controls">
<div id="parametersContainer">
  <div id="leftColumn">
    <fieldset>
      <legend>Benchmark Setup</legend>

      <label for="workload" data-tooltip="Select the benchmark workload: GROMACS or AMBER.">
        Select Workload:
      </label>
      <select id="workload" onchange="updateAITip()">
        <option value="GROMACS">GROMACS</option>
        <option value="AMBER">AMBER</option>
      </select>

      <label for="benchmarkId" data-tooltip="Select a benchmark ID from 1 to 11.">
        Benchmark ID (1â€“11):
      </label>
      <input type="range" id="benchmarkId" min="1" max="11" value="4" oninput="updateValue('benchmarkVal', this.value); updateAITip()">
      <span id="benchmarkVal">4</span>
    </fieldset>

    <fieldset>
      <legend>Initial Setup</legend>

      <label for="total_budget" data-tooltip="Set the total available budget for your project in EUR.">
        Total Budget (â‚¬):
        <input type="range" id="total_budget" min="0" max="100000000" value="10000000" step="100" 
               oninput="updateValue('v_budget', this.value); updateAITip()">
        <span id="v_budget">10000000</span>
      </label>    

      <label for="sameGpuCheckbox">
        <input type="checkbox" id="sameGpuCheckbox" onchange="updateAITip()"> Use same number of GPUs for all GPU types
      </label>
    </fieldset>

    <fieldset>
      <legend>Capital Cost Parameters</legend>

      <label for="C_node_server" data-tooltip="Set the server cost per node.">
        Node Server (â‚¬):
        <input type="range" id="C_node_server" min="0" max="50000" value="10000" step="5"
               oninput="updateValue('v_node_server', this.value); updateAITip()">
        <span id="v_node_server">10000</span>
      </label>

      <label for="C_node_infra" data-tooltip="Cost for cooling and power distribution units.">
        Node Infrastructure (â‚¬):
        <input type="range" id="C_node_infra" min="0" max="25000" value="5000" step="5"
               oninput="updateValue('v_node_infra', this.value); updateAITip()">
        <span id="v_node_infra">5000</span>
      </label>

      <label for="C_node_facility">
        Node Facility (â‚¬):
        <input type="range" id="C_node_facility" min="0" max="25000" value="0" step="5"
               oninput="updateValue('v_node_facility', this.value); updateAITip()">
        <span id="v_node_facility">0</span>
      </label>

      <label for="C_software">
        Software (â‚¬):
        <input type="range" id="C_software" min="0" max="25000" value="5000" step="5"
               oninput="updateValue('v_software', this.value); updateAITip()">
        <span id="v_software">5000</span>
      </label>
    </fieldset>
  </div>

  <div id="rightColumn">
    <fieldset>
      <legend>Operational Cost Parameters</legend>

      <label for="C_electricity">
        Electricity (â‚¬/kWh):
        <input type="range" id="C_electricity" min="0" max="5" value="0.21" step="0.01"
               oninput="updateValue('v_electricity', this.value); updateAITip()">
        <span id="v_electricity">0.21</span>
      </label>

      <label for="C_PUE">
        PUE:
        <input type="range" id="C_PUE" min="1" max="5" value="1.2" step="0.01"
               oninput="updateValue('v_PUE', this.value); updateAITip()">
        <span id="v_PUE">1.2</span>
      </label>

      <label for="C_maintenance">
        Node Maintenance (â‚¬/year):
        <input type="range" id="C_maintenance" min="0" max="5000" value="200" step="5"
               oninput="updateValue('v_maintenance', this.value); updateAITip()">
        <span id="v_maintenance">200</span>
      </label>

      <label for="system_usage">
        System Usage (hrs/year):
        <input type="range" id="system_usage" min="0" max="8760" value="8760" step="5"
               oninput="updateValue('v_usage', this.value); updateAITip()">
        <span id="v_usage">8760</span>
      </label>

      <label for="lifetime">
        System Lifetime (years):
        <input type="range" id="lifetime" min="1" max="100" value="5" step="1"
               oninput="updateValue('v_lifetime', this.value); updateAITip()">
        <span id="v_lifetime">5</span>
      </label>

      <label for="W_node_baseline">
        Node Baseline Power (W):
        <input type="range" id="W_node_baseline" min="0" max="10000" value="500" step="5"
               oninput="updateValue('v_baseline', this.value); updateAITip()">
        <span id="v_baseline">500</span>
      </label>

      <label for="C_depreciation">
        Depreciation (â‚¬/year):
        <input type="range" id="C_depreciation" min="0" max="25000" value="0" step="5"
               oninput="updateValue('v_depreciation', this.value); updateAITip()">
        <span id="v_depreciation">0</span>
      </label>

      <label for="C_subscription">
        Software Subscription (â‚¬/year):
        <input type="range" id="C_subscription" min="0" max="25000" value="0" step="5"
               oninput="updateValue('v_subscription', this.value); updateAITip()">
        <span id="v_subscription">0</span>
      </label>

      <label for="C_uefficiency">
        Utilization Inefficiency (â‚¬/year):
        <input type="range" id="C_uefficiency" min="0" max="25000" value="0" step="5"
               oninput="updateValue('v_uefficiency', this.value); updateAITip()">
        <span id="v_uefficiency">0</span>
      </label>

      <label for="C_heatreuseperkWh">
        Heat Reuse Revenue (â‚¬/kWh):
        <input type="range" id="C_heatreuseperkWh" min="0" max="5" value="0" step="0.1"
               oninput="updateValue('v_heatreuseperkWh', this.value); updateAITip()">
        <span id="v_heatreuseperkWh">0</span>
      </label>

      <label for="Factor_heatreuse">
        Heat Reuse Factor:
        <input type="range" id="Factor_heatreuse" min="0" max="1" value="0" step="0.1"
               oninput="updateValue('v_Factor_heatreuse', this.value); updateAITip()">
        <span id="v_Factor_heatreuse">0</span>
      </label>
    </fieldset>
  </div>
</div>

<div style="text-align: center; margin-top: 20px;">
  <button type="button" class="medium-button" onclick="calculate(); updateAITip()">Calculate</button>
  <button type="button" class="medium-button" onclick="resetForm(); updateAITip()">Reset All</button> 
  <button type="button" class="medium-button" onclick="promptPassword()">Show Model</button>
</div>
</form>

<div id="password-prompt" style="display: none; margin-top: 10px;">
  <label for="password">Enter Password:</label>
  <input type="password" id="password" placeholder="Password">
  <button onclick="validatePassword()">Submit</button>
  <p id="error-message" style="color: red; display: none;">Incorrect password. Try again.</p>
</div>

<div id="aiTips" class="ai-tips">
  <h3>Smart Strategy Tip ðŸ’¡</h3>
  <p id="ai-tip-text">Adjusting values can help optimize your TCO!</p>
</div>

<div id="output">
  <h2>Results</h2>
  <div id="resultsTable"></div>
  <button id="download-csv" style="display: none;">Download CSV</button>
  <div id="comparison-message-container" class="comparison-message"></div>
  <div id="gpu-chart"></div>
  <div id="stacked-tco-chart"></div>
  <div id="gpuTornadoPlots"></div>
  <div id="sensitivityHeatmap"></div>
  <div id="elasticityTableContainer"></div>
  <button id="download-elasticity-csv" style="display: none;">Download CSV</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
<script src="https://cdn.plot.ly/plotly-2.27.1.min.js"></script>
<script src="main.js" defer></script>
</body>
</html>
